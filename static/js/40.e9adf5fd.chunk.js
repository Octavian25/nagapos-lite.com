(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{1159:function(a,e,t){"use strict";t.r(e);var n=t(17),r=t(18),i=t(47),o=t(20),s=t(19),l=t(0),c=t.n(l),m=t(56),d=t(73),u=t(81),g=t.n(u),p=t(82),b=t.n(p),h=t(11),f=t(23),k=t(37),E=t(90),B=t.n(E),_=t(625),v=t(623),O=t(624),S=t(720),N=t(276),j=t(277),T=t(24),y=t(50),D=t.n(y),F=function(a){Object(o.a)(t,a);var e=Object(s.a)(t);function t(a){var r;return Object(n.a)(this,t),(r=e.call(this,a)).state={no_kirim:[],datagudang:[],databaki:[],loading:!1},r}return Object(r.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(Object(h.nb)()),this.props.dispatch(Object(h.lb)())}},{key:"render",value:function(){var a=this;return c.a.createElement(_.a,{backdrop:"static",keyboard:!1,isOpen:this.props.isOpen,toggle:function(){return a.props.dispatch(Object(h.Cb)())}},c.a.createElement(v.a,null," ",this.props.title," "),c.a.createElement("form",{onSubmit:this.props.handleSubmit,autoComplete:"off",onKeyPress:function(a){"Enter"===a.key&&a.preventDefault()}},c.a.createElement(O.a,null,c.a.createElement("div",{className:"form-group"},c.a.createElement(N.a,{label:"No Kirim",name:"no_kirim",options:this.props.no_kirim.map(function(a){return{value:a._id.no_kirim,name:a._id.no_kirim}}),placeholder:"Silahkan Pilih No Kirim",component:T.f})),c.a.createElement("div",{className:"form-group"},this.state.datagudang!==[]?c.a.createElement(N.a,{label:"Kode Gudang",name:"kode_gudang",onChange:function(e){a.setState({kode_gudang:e}),a.props.change("kode_baki","")},options:this.props.datagudang.filter(function(a){return void 0!==a.kode_gudang}).map(function(a){return{value:a.kode_gudang,name:a.kode_gudang+" - "+a.nama_gudang}}),placeholder:"Silahkan Pilih Kode Gudang",component:T.f}):c.a.createElement(B.a,{width:"100%",height:50})),c.a.createElement("div",{className:"form-group"},c.a.createElement(N.a,{label:"Kode Baki",name:"kode_baki",options:this.props.databaki.filter(function(e){return e.kode_gudang===a.state.kode_gudang}).map(function(a){return{value:a.kode_baki,name:a.kode_baki+" - "+a.nama_baki}||[]}),placeholder:"Silahkan Pilih Kode Baki",component:T.f}))),c.a.createElement(S.a,null,c.a.createElement("button",{className:"btn btn-primary",disabled:this.props.submitting,type:"submit"},this.props.isLoading?c.a.createElement(c.a.Fragment,null,c.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Cek Data Barang"):"Cek Data Barang"),c.a.createElement("button",{className:"btn btn-white",onClick:function(){return a.props.dispatch(Object(h.Cb)())},type:"button",disabled:this.props.isLoading},"Batal")),this.props.isLoading?c.a.createElement(D.a,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}):null))}}]),t}(l.Component);F=Object(j.a)({form:"FormTerimaBarang",enableReinitialize:!0})(F);var x=Object(k.b)(function(a){return{initialValues:{no_kirim:(null===localStorage.getItem("data_terima_barang")?[]:JSON.parse(localStorage.getItem("data_terima_barang")||[])).no_kirim||""},datagudang:a.datamaster.getDataGudang,databaki:a.datamaster.getDataBaki}},null)(F),C=t(13),L=t(41),w=t(49),K=p.Search.SearchBar,M=function(a){Object(o.a)(t,a);var e=Object(s.a)(t);function t(a){var r;return Object(n.a)(this,t),(r=e.call(this,a)).state={isEdit:!1,modalDialog:!1,isLoading:!1,isLoadingBtn:!1,DataTerimaBarang:[],SimpanDataBarang:!1,resetTerimaBarang:!1,columns:[{dataField:"no",text:"No ",formatter:function(a,e,t,n){return r.setState({num:1+t}),c.a.createElement("div",null," ",++t," ")},footerAttrs:{colSpan:"4"},footer:function(a,e,t,n){return c.a.createElement("div",null,"Total Barang : ",r.state.DataTerimaBarang.length," ")}},{dataField:"kode_barang",text:"Kode Barang",sort:!0},{dataField:"kode_barcode",text:"Kode Barcode"},{dataField:"kode_intern",text:"Kode Intern"},{dataField:"berat",text:"Berat",formatter:function(a){return a.toFixed(3)},footer:function(a){return a.reduce(function(a,e){return a+e},0).toFixed(3)}},{dataField:"nama_atribut",text:"Nama Atribut",footer:""},{dataField:"berat_atribut",text:"Berat Atribut",formatter:function(a){return a.toFixed(3)},footer:function(a){return a.reduce(function(a,e){return a+e},0).toFixed(3)}}]},r.handleSubmit=r.handleSubmit.bind(Object(i.a)(r)),r}return Object(r.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(Object(f.o)())}},{key:"resetTerimaBarang",value:function(){var a=this;this.setState({resetTerimaBarang:!0}),setTimeout(function(){a.setState({DataTerimaBarang:[],resetTerimaBarang:!1})},300)}},{key:"handleSubmit",value:function(a){var e=this,t={no_kirim:a.no_kirim,kode_gudang:a.kode_gudang,kode_toko:a.kode_baki};localStorage.setItem("data_terima_barang",JSON.stringify(t)),this.setState({SimpanDataBarang:t}),this.setState({isLoading:!0});var n={no_kirim:a.no_kirim};Object(C.c)("kirimbarang/get/nokirim/"+a.no_kirim,n).then(function(a){e.setState({DataTerimaBarang:a.data})}).then(function(){e.setState({isLoading:!1})}).then(function(){e.props.dispatch(Object(w.d)("FormTerimaBarang"))}).then(function(){e.props.dispatch(Object(h.Cb)())})}},{key:"formEditBaki",value:function(a){this.props.dispatch(Object(h.Db)()),this.props.dispatch(Object(f.m)(a)),this.setState({isEdit:!0})}},{key:"ShowModalTerimaBarang",value:function(){this.props.dispatch(Object(h.Db)()),this.props.dispatch(Object(f.m)(!1)),this.setState({isEdit:!1})}},{key:"terimabangOnline",value:function(){var a=this;this.setState({isLoadingBtn:!0}),Object(C.h)("terimabarang/add",this.state.SimpanDataBarang).then(function(){a.setState({DataTerimaBarang:[]})}).then(function(){a.props.dispatch(Object(w.d)("FormTerimaBarang")),localStorage.setItem("data_terima_barang",JSON.stringify([]))}).then(function(){a.props.dispatch(Object(f.o)())}).then(function(){a.setState({isLoadingBtn:!1})}).then(function(){Object(L.d)("Barang Berhasil Diterima")}).catch(function(e){return a.errorHandling(e)})}},{key:"errorHandling",value:function(a){Object(L.a)(a),this.setState({isLoadingBtn:!1})}},{key:"render",value:function(){var a=this;return c.a.createElement("div",null,c.a.createElement("ol",{className:"breadcrumb float-xl-right"},c.a.createElement("li",{className:"breadcrumb-item"},c.a.createElement(m.b,{to:"#"},"Barang")),c.a.createElement("li",{className:"breadcrumb-item active"},"Terima Barang")),c.a.createElement("h1",{className:"page-header"},"Terima Barang "),c.a.createElement(d.a,null,c.a.createElement(d.c,null,"Terima Barang"),c.a.createElement("br",null),c.a.createElement("div",{className:"container"},!1===this.state.isLoading?c.a.createElement(b.a,{keyField:"kode_barang",data:this.state.DataTerimaBarang||[],columns:this.state.columns,search:!0,exportCSV:{fileName:"Export Terima Barang.csv"}},function(e){return c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-6"},c.a.createElement("button",{onClick:function(){return a.ShowModalTerimaBarang()},className:"btn btn-teal"}," ",c.a.createElement("i",{className:"fa fa-plus"})," ")),c.a.createElement("div",{className:"col-6"},c.a.createElement("div",{className:"text-right"},c.a.createElement(K,e.searchProps))),c.a.createElement("hr",null),c.a.createElement("div",{className:"col-12"},c.a.createElement(g.a,e.baseProps),c.a.createElement("br",null),c.a.createElement(c.a.Fragment,null,c.a.createElement("button",{className:"btn btn-primary",onClick:function(){return a.terimabangOnline()}},a.state.isLoadingBtn?c.a.createElement(c.a.Fragment,null,c.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Terima Barang"):"Terima Barang"),"\xa0",c.a.createElement("button",{className:"btn btn-warning",onClick:function(){return a.resetTerimaBarang()}},a.state.resetTerimaBarang?c.a.createElement(c.a.Fragment,null,c.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Reset"):"Reset"))))}):c.a.createElement(B.a,{width:"100%",height:200}),c.a.createElement(x,{no_kirim:this.props.Nokirim,isLoading:this.state.isLoading,isEdit:this.state.isEdit,title:(this.state.isEdit,"Terima Barang"),isOpen:this.props.hideModal,onSubmit:function(e){return a.handleSubmit(e)}})),c.a.createElement("br",null)))}}]),t}(c.a.Component);e.default=Object(k.b)(function(a){return{Nokirim:a.databarang.getNokirim,hideModal:a.datamaster.modalDialog}},null)(M)},720:function(a,e,t){"use strict";var n=t(21),r=t(29),i=t(0),o=t.n(i),s=t(4),l=t.n(s),c=t(33),m=t.n(c),d=t(22),u={tag:d.m,className:l.a.string,cssModule:l.a.object},g=function(a){var e=a.className,t=a.cssModule,i=a.tag,s=Object(r.a)(a,["className","cssModule","tag"]),l=Object(d.i)(m()(e,"modal-footer"),t);return o.a.createElement(i,Object(n.a)({},s,{className:l}))};g.propTypes=u,g.defaultProps={tag:"div"},e.a=g}}]);
//# sourceMappingURL=40.e9adf5fd.chunk.js.map