(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{1230:function(a,e,t){"use strict";t.r(e);var n=t(13),r=t(14),o=t(16),s=t(15),i=t(0),l=t.n(i),c=t(40),m=t(27),p=t(22),d=t.n(p),u=t(50),b=t(131),g=t(891),h=t.n(g),_=t(335),f=t(336),k=t(339),E=t(134),v=t(12),S=t(29),O=t(5),N=t(25),y=t(10),j=function(a){var e={};return a.kode_dept||(e.kode_dept="Kode Jenis Harus Dipilih"),a.nama_barang||(e.nama_barang="Nama Barang Tidak Boleh Kosong"),a.berat||(e.berat="Berat Tidak Boleh Kosong"),a.harga||(e.harga="Harga Tidak Boleh Kosong"),a.harga_rata||(e.harga_rata="Harga Rata Tidak Boleh Kosong"),a.kondisi||(e.kondisi="Kondisi Harus Dipilih"),e},B=t(53),I=t.n(B),M=t(88),x=Object(E.createNumberMask)({prefix:"Rp. ",locale:"kr-KO"}),C=function(a){Object(o.a)(t,a);var e=Object(s.a)(t);function t(a){var r;return Object(n.a)(this,t),(r=e.call(this,a)).state={isLoading:!1,harga_jual:!0,hargapergram:!0,ongkos:!0,total:!0},r}return Object(r.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(Object(v.sb)()),this.props.dispatch(Object(v.ob)()),this.props.dispatch(Object(v.ub)()),setTimeout(function(){document.getElementById("kode_barcode").focus()},100)}},{key:"getBarcode",value:function(a){var e=this;clearTimeout(this.delay),this.delay=setTimeout(function(){e.setState({searching:!0});var t=JSON.parse(localStorage.getItem("data_barang_pembelian_tmp"))||[];document.getElementById("kode_barcode").focus(),-1===t.findIndex(function(e){return e.kode_barcode===a})?Object(y.c)("pembelian/get/jual/"+a).then(function(a){0===a.data.length?(Object(N.e)("info","Data Yang Dicari Tidak Ada"),e.props.change("nama_barang",""),e.props.change("nama_atribut",""),e.props.change("berat_atribut",""),e.props.change("harga_atribut",""),e.props.change("berat",""),e.props.change("berat_nota",""),e.props.change("kode_dept",""),e.props.change("harga",""),e.props.change("harga_nota",""),e.setState({searching:!1})):(e.setState({searching:!1}),a.data.forEach(function(a,t){var n=Object(O.g)("data_customer_pembelian_tmp");if(null===n||0===n.length){var r={kode_sales:a.kode_sales,jenis_pelanggan:"NONMEMBER"===a.kode_member?"NONMEMBER":"MEMBER",kode_customer:a.kode_member,nama_customer:a.nama_customer,alamat_customer:a.alamat_customer,no_hp:a.no_hp};localStorage.setItem("data_customer_pembelian_tmp",JSON.stringify(r)),e.props.change("nama_barang",a.nama_barang),e.props.change("nama_atribut",a.nama_atribut),e.props.change("berat_atribut",a.berat_atribut),e.props.change("harga_atribut",a.harga_atribut),e.props.change("berat_nota",a.berat),e.props.change("berat",a.berat),e.props.change("kode_dept",a.kode_dept),e.props.change("harga_nota",parseInt(a.harga_jual)+parseInt(a.harga_atribut)),e.setState({harga_jual:!1,hargapergram:!1,ongkos:!1})}else{if(e.setState({searching:!1}),a.kode_member!==n.kode_customer)return Object(N.e)("info","Data Customer Berbeda"),!1;var o={kode_sales:a.kode_sales,jenis_pelanggan:"NONMEMBER"===a.kode_member?"NONMEMBER":"MEMBER",kode_customer:a.kode_member,nama_customer:a.nama_customer,alamat_customer:a.alamat_customer,no_hp:a.no_hp};localStorage.setItem("data_customer_pembelian_tmp",JSON.stringify(o)),e.props.change("kadar",a.kadar),e.props.change("nama_barang",a.nama_barang),e.props.change("nama_atribut",a.nama_atribut),e.props.change("berat_atribut",a.berat_atribut),e.props.change("harga_atribut",a.harga_atribut),e.props.change("berat_nota",a.berat),e.props.change("berat",a.berat),e.props.change("kode_dept",a.kode_dept),e.props.change("harga_nota",parseInt(a.harga_jual)+parseInt(a.harga_atribut)),e.setState({harga_jual:!1,hargapergram:!1,ongkos:!1,searching:!1})}}))}).catch(function(a){console.log(a),e.props.change("nama_barang",""),e.props.change("nama_atribut",""),e.props.change("berat_atribut",""),e.props.change("harga_atribut",""),e.props.change("berat",""),e.props.change("kadar",""),e.props.change("kode_dept",""),e.props.change("harga",""),Object(N.e)("info","Data Yang Dicari Tidak Ada"),e.setState({searching:!1})}):(e.props.change("nama_barang",""),e.props.change("nama_atribut",""),e.props.change("berat_atribut",""),e.props.change("harga_atribut",""),e.props.change("kadar",""),e.props.change("berat",""),e.props.change("kode_dept",""),e.props.change("harga",""),Object(N.e)("info","Kode Barcode Sudah Ada Dalam Table"),e.setState({searching:!1}))},1500)}},{key:"hitungTotal",value:function(){this.props.change("harga_rata",this.props.harga_rata)}},{key:"setValue",value:function(a){""===a&&this.change("berat_nota",1)}},{key:"getHarga",value:function(a){var e=this,t=a.split("~");Object(y.c)("parabeli/get/by-kode-kondisi/"+t[0]).then(function(a){e.props.change("potongan",a.data.potongan),e.props.change("harga",e.props.harga_beli)})}},{key:"render",value:function(){var a=this;return l.a.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:function(a){"Enter"===a.key&&a.preventDefault()},autoComplete:"off"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-md-4"},l.a.createElement(_.a,{id:"potongan",name:"potongan",component:S.b,type:"hidden",readOnly:!0}),l.a.createElement(_.a,{onChange:function(e){return a.getBarcode(e.target.value)},id:"kode_barcode",name:"kode_barcode",label:"Kode Barcode",type:"text",normalize:function(a){return a.replace(/[^\d]/g,"")},placeholder:"Masukan Kode Barcode",component:S.e})),l.a.createElement("div",{className:"col-12 col-md-4"},l.a.createElement(_.a,{name:"kondisi",label:"Kondisi",onChange:function(e){return a.getHarga(e)},options:this.props.datakondisi.filter(function(a){return void 0!==a.kondisi_barang}).map(function(a){return{value:a._id+"~"+a.kondisi_barang,name:a.kondisi_barang}||[]}),placeholder:"Pilih Kondisi",component:S.f})),l.a.createElement("div",{className:"col-12 col-md-4"},l.a.createElement(_.a,{label:"Kode Jenis",name:"kode_dept",options:this.props.datajenis.filter(function(a){return void 0!==a.kode_dept}).map(function(a){return{value:a.kode_dept,name:a.kode_dept+" - "+a.nama_dept}||[]}),placeholder:"Silahkan Pilih Kode Jenis",component:S.f})),l.a.createElement("div",{className:"col-12 col-md-4"},l.a.createElement(_.a,{name:"nama_barang",label:"Nama Barang",type:"text",placeholder:"Masukan Nama Barang",component:S.e})),l.a.createElement("div",{className:"col-12 col-md-2"},l.a.createElement(_.a,{name:"kadar",label:"Kadar",type:"telp",normalize:M.c,placeholder:"Masukan Kadar",component:S.e})),l.a.createElement("div",{className:"col-12 col-md-2"},l.a.createElement(_.a,{name:"berat_nota",label:"Berat Nota",readOnly:!0,normalize:M.a,placeholder:"Masukan Berat Nota",component:S.e})),l.a.createElement("div",{className:"col-12 col-md-4"},l.a.createElement(_.a,{id:"berat",name:"berat",label:"Berat",normalize:M.a,onChange:this.hitungTotal(),placeholder:"Masukan Berat",component:S.e})),l.a.createElement("div",{className:"col-12 col-md-4"},l.a.createElement(_.a,Object.assign({name:"harga_nota",label:"Harga Nota",type:"telp",readOnly:!0,onChange:this.hitungTotal()},x,{placeholder:"Masukan Harga Nota",component:S.e}))),l.a.createElement("div",{className:"col-12 col-md-4"},l.a.createElement(_.a,Object.assign({name:"harga",label:"Harga Beli",type:"telp"},x,{onChange:this.hitungTotal(),placeholder:"Masukan Harga Beli",component:S.e}))),l.a.createElement("div",{className:"col-12 col-md-4"},l.a.createElement(_.a,Object.assign({name:"harga_rata",label:"Harga Rata",type:"telp",readOnly:!0},x,{placeholder:"Masukan Harga Rata",component:S.e}))),l.a.createElement("div",{className:"col-12 col-md-12 text-right"},l.a.createElement("label",null,"\xa0"),l.a.createElement("button",{className:"btn btn-primary",disabled:this.props.isLoadingSimpanBarang,type:"submit"},this.props.isLoadingSimpanBarang?l.a.createElement(l.a.Fragment,null,l.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Menyimpan"):"Simpan Barang"))),this.state.searching?l.a.createElement(I.a,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}):null)}}]),t}(i.Component);C=Object(f.a)({form:"ModalTambahBarang",enableReinitialize:!0,validate:j})(C);var D=Object(k.a)("ModalTambahBarang"),L=Object(c.b)(function(a){var e=D(a,"harga","berat","harga_nota","potongan"),t=e.harga,n=e.berat,r=e.potongan,o=e.harga_nota,s=parseInt(r||0)*parseFloat(n||0);return{setBarangPembelian:a.penjualan.setBarangPembelian,harga_rata:parseFloat(t||0)/parseFloat(n||0)||0,harga_potong:parseInt(o||0)-parseInt(s||0),harga_beli:parseInt(o||0)-parseInt(s||0),DataSales:a.datamaster.getDataSales,datajenis:a.datamaster.getDataJenis,harga_nota:o,datakondisi:a.datamaster.getKondisiPembelian}})(C),P=t(46),K=t(751),T=[{value:"MEMBER",name:"MEMBER"},{value:"NONMEMBER",name:"NON MEMBER"}],J=function(a){Object(o.a)(t,a);var e=Object(s.a)(t);function t(a){var r;return Object(n.a)(this,t),(r=e.call(this,a)).state={showMember:!0},r}return Object(r.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(Object(v.sb)());var a=null===localStorage.getItem("data_customer_pembelian_tmp")?[]:JSON.parse(localStorage.getItem("data_customer_pembelian_tmp")||[]);a&&"MEMBER"===a.jenis_pelanggan?this.setState({showMember:!1}):this.setState({showMember:!0})}},{key:"changemember",value:function(a){"MEMBER"===a?this.setState({showMember:!1}):(this.props.change("kode_customer",""),this.props.change("nama_customer",""),this.props.change("no_hp",""),this.props.change("alamat_customer",""),this.setState({showMember:!0}))}},{key:"getMember",value:function(a){var e=this;Object(y.c)("member/get/by-kode-member/"+a).then(function(a){0===a.data.length?Object(N.e)("info","Member Yang Anda Masukan Tidak Ada !!!"):a.data.forEach(function(a,t){e.props.change("nama_customer",a.nama_customer),e.props.change("no_hp",a.no_hp),e.props.change("alamat_customer",a.alamat_customer)})}).catch(function(a){Object(N.e)("info","Terjadi Kesalahan SIlahkan Ulangi Kembali !!!")})}},{key:"render",value:function(){var a=this;return l.a.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:function(a){"Enter"===a.key&&a.preventDefault()},autoComplete:"off"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-4"},l.a.createElement(_.a,{tabIndex:"1",name:"kode_sales",label:"Pilih Kode Sales",placeholder:"Masukan Kode Sales",options:this.props.DataSales.filter(function(a){return void 0!==a.kode_sales}).map(function(a){return{value:a.kode_sales,name:a.kode_sales}}),component:S.f})),l.a.createElement("div",{className:"col-4"},l.a.createElement(_.a,{tabIndex:"2",name:"jenis_pelanggan",label:"Pilih Pelanggan",onChange:function(e){return a.changemember(e)},placeholder:"Silahkan Pilih Pelanggan",options:T,component:S.f})),l.a.createElement("div",{className:"col-4"},l.a.createElement(_.a,{tabIndex:"3",name:"kode_customer",onChange:function(e){return a.getMember(e.target.value)},component:S.e,type:"text",readOnly:this.state.showMember,label:"Kode Customer",placeholder:"Masukan Kode Customer"})),l.a.createElement("div",{className:"col-4"},l.a.createElement(_.a,{tabIndex:"4",name:"nama_customer",component:S.e,type:"text",label:"Nama Customer",placeholder:"Masukan Nama Customer"})),l.a.createElement("div",{className:"col-4"},l.a.createElement(_.a,{tabIndex:"5",name:"no_hp",component:S.e,type:"number",label:"No Hp",placeholder:"Masukan No Hp"})),l.a.createElement("div",{className:"col-4"},l.a.createElement(_.a,{tabIndex:"6",name:"alamat_customer",component:S.e,type:"textarea",label:"Alamat Customer",placeholder:"Masukan Alamat Customer"}))),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-6 text-left"},l.a.createElement("button",{onClick:function(){return a.props.back()},className:"btn btn-secondary",type:"button"},"Kembali")),l.a.createElement("div",{className:"col-6 text-right"},l.a.createElement("button",{className:"btn btn-primary",type:"submit",disabled:this.props.isLoading},this.props.isLoading?l.a.createElement(l.a.Fragment,null,l.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Selesai Pembelian"):"Selesai Pembelian"))))}}]),t}(i.Component);J=Object(f.a)({form:"ModalDataCustomer",enableReinitialize:!0,validate:K.a})(J);var F=Object(c.b)(function(a){var e=null===localStorage.getItem("data_customer_pembelian_tmp")?[]:JSON.parse(localStorage.getItem("data_customer_pembelian_tmp")||[]);return{initialValues:{kode_sales:e.kode_sales||"",jenis_pelanggan:e.jenis_pelanggan||"",kode_customer:e.kode_customer||"",nama_customer:e.nama_customer||"",no_hp:e.no_hp||"",alamat_customer:e.alamat_customer||""},DataSales:a.datamaster.getDataSales}},null)(J),w=t(732),R=Object(E.createNumberMask)({prefix:"Rp. ",locale:"kr-KO"}),H=[{value:"CASH",name:"CASH"}],A=function(a){Object(o.a)(t,a);var e=Object(s.a)(t);function t(){var a;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(a=e.call.apply(e,[this].concat(o))).state={},a}return Object(r.a)(t,[{key:"componentDidMount",value:function(){var a=this;this.props.dispatch(Object(v.sb)());var e=JSON.parse(localStorage.getItem("data_barang_pembelian_tmp")),t=0;e.forEach(function(e,n){t+=e.harga,a.props.change("grand_total_pembayaran",t)}),this.props.change("jenis","CASH"),setTimeout(function(){document.getElementById("cash_trx_pembelian").focus()},100)}},{key:"hitungTotal",value:function(){this.props.change("kembali",this.props.kembali)}},{key:"render",value:function(){var a=this;return l.a.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:function(a){"Enter"===a.key&&a.preventDefault()},autoComplete:"off"},l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-6"},l.a.createElement(_.a,Object.assign({name:"grand_total_pembayaran",component:S.e,type:"text",onChange:this.hitungTotal(),readOnly:!0},R,{label:"Grand Total Pembayaran",placeholder:"Masukan Grand Total"}))),l.a.createElement("div",{className:"col-6"},l.a.createElement(_.a,{name:"jenis",label:"Pilih Jenis Bayar",placeholder:"Pilih Jenis Pembayaran",options:H,component:S.f})),l.a.createElement("div",{className:"col-6"},l.a.createElement(_.a,Object.assign({tabIndex:"1",name:"cash",id:"cash_trx_pembelian",component:S.e,type:"text",label:"Cash",onChange:this.hitungTotal()},R,{normalize:M.c,placeholder:"Masukan Total Pembayaran"}))),l.a.createElement("div",{className:"col-6"},l.a.createElement(_.a,Object.assign({name:"kembali",component:S.e,type:"text",readOnly:!0,label:"Kembali"},R,{normalize:M.c,placeholder:"Kembalian"})))),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-6 text-left"},l.a.createElement("button",{onClick:function(){return a.props.back()},className:"btn btn-secondary",type:"button"},"Kembali")),l.a.createElement("div",{className:"col-6 text-right"},l.a.createElement("button",{tabIndex:"2",className:"btn btn-primary ",disabled:this.props.isLoading,type:"submit"},this.props.isLoading?l.a.createElement(l.a.Fragment,null,l.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Diproses"):"Bayar Sekarang"))))}}]),t}(i.Component);A=Object(f.a)({form:"ModalPembayaran",enableReinitialize:!0,validate:w.a})(A);var z=Object(k.a)("ModalPembayaran"),U=Object(c.b)(function(a){var e=z(a,"grand_total_pembayaran","cash"),t=e.grand_total_pembayaran,n=e.cash;return{kembali:parseFloat(t||0)-parseFloat(n||0)}})(A),q=t(87),G=function(a){Object(o.a)(t,a);var e=Object(s.a)(t);function t(a){var r;return Object(n.a)(this,t),(r=e.call(this,a)).state={isLoading:!1,harga_jual:!0,hargapergram:!0,ongkos:!0,total:!0},r}return Object(r.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(Object(v.sb)()),this.props.dispatch(Object(v.ob)()),this.props.dispatch(Object(v.ub)())}},{key:"render",value:function(){return l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(q.a,{keyField:"nama_barang",exportCsv:!1,data:0===this.props.setBarangPembelian.length?JSON.parse(localStorage.getItem("data_barang_pembelian_tmp")):this.props.setBarangPembelian,columns:this.props.columns,empty:!0,textEmpty:"Data Barang Kosong"})))}}]),t}(i.Component);G=Object(f.a)({form:"LihatDataBarang",enableReinitialize:!0,validate:j})(G);var Y=Object(k.a)("LihatDataBarang"),V=Object(c.b)(function(a){var e=Y(a,"harga","berat"),t=e.harga,n=e.berat;return{setBarangPembelian:a.penjualan.setBarangPembelian,harga_rata:parseFloat(t||0)/parseFloat(n||0)||0,DataSales:a.datamaster.getDataSales,datajenis:a.datamaster.getDataJenis,datakondisi:a.datamaster.getKondisiPembelian}})(G),W=t(769),Q=t(223),X=t(30),Z=function(a){Object(o.a)(t,a);var e=Object(s.a)(t);function t(a){var r;return Object(n.a)(this,t),(r=e.call(this,a)).state={isLoading:!1,step:0,isLoadingBatal:!1,isLoadingSimanBeli:!1,isLoadingDataCustomer:!1,isLoadingSimpanBarang:!1,columns:[{dataField:"kode_barcode",text:"Kode Barcode",footerAttrs:{colSpan:"3"},footer:"Total"},{dataField:"nama_barang",text:"Nama Barang"},{dataField:"kode_dept",text:"Jenis"},{dataField:"harga_nota",text:"Harga Nota",formatter:function(a){return l.a.createElement("span",null,parseInt(a).toLocaleString("kr-KO"))},footer:function(a){return parseInt(a.reduce(function(a,e){return a+e},0)).toLocaleString("kr-KO")}},{dataField:"berat_nota",text:"Berat Nota",formatter:function(a){return l.a.createElement("span",null,parseFloat(a).toFixed(3))},footer:function(a){return parseFloat(a.reduce(function(a,e){return a+e},0)).toFixed(3)}},{dataField:"berat",text:"Berat",formatter:function(a){return l.a.createElement("span",null,parseFloat(a).toFixed(3))},footer:function(a){return parseFloat(a.reduce(function(a,e){return a+e},0)).toFixed(3)}},{dataField:"harga",text:"Harga Beli",formatter:function(a){return l.a.createElement("span",null,parseInt(a).toLocaleString("kr-KO"))},footer:function(a){return parseInt(a.reduce(function(a,e){return a+e},0)).toLocaleString("kr-KO")}},{dataField:"kondisi",text:"Kondisi",footer:""},{dataField:"action",text:"Action",csvExport:!1,headerClasses:"text-center",formatter:function(a,e,t){return l.a.createElement("div",{className:"row text-center"},l.a.createElement("div",{className:"col-12"},l.a.createElement("button",{type:"button",onClick:function(){return r.hapusdata(t)},className:"btn btn-danger mr-3"},l.a.createElement("i",{className:"fa fa-trash"}))))},footer:""}]},r}return Object(r.a)(t,[{key:"hapusdata",value:function(a){var e=this;d.a.fire({title:"Anda Yakin !!",text:"Ingin Menghapus Data Ini ?",icon:"warning",position:"top-center",cancelButtonText:"Tidak",showCancelButton:!0,confirmButtonText:"OK",showConfirmButton:!0}).then(function(t){if(t.isConfirmed){var n=JSON.parse(localStorage.getItem("data_barang_pembelian_tmp"));n.splice(a,1),localStorage.setItem("data_barang_pembelian_tmp",JSON.stringify(n)),0===n.length&&e.setState({step:0}),e.props.dispatch(Object(u.k)(n))}})}},{key:"simpanBarang",value:function(a){var e=a.kondisi.split("~"),t={kode_barcode:void 0===a.kode_barcode?"-":a.kode_barcode,nama_barang:a.nama_barang,kondisi:e[1],kadar:parseInt(a.kadar||0),kode_dept:a.kode_dept,harga_rata:parseInt(a.harga_rata),harga_nota:parseInt(a.harga_nota)||0,harga:parseInt(a.harga),berat_nota:parseFloat(a.berat_nota)||0,berat:parseFloat(a.berat)};if(this.setState({hasil:t}),void 0===a.kode_barcode)this.sendRequest(a);else{if(a.harga_nota<a.harga)return Object(N.e)("info","Harga Melebihi Nota"),this.props.dispatch(Object(v.Bb)()),!1;this.sendRequest(a)}}},{key:"sendRequest",value:function(a){var e=this,t=a.kondisi.split("~");this.setState({isLoadingSimpanBarang:!0,step:1});var n={kode_barcode:void 0===a.kode_barcode?"-":a.kode_barcode,nama_barang:a.nama_barang,kondisi:t[1],kode_dept:a.kode_dept,kadar:parseInt(a.kadar||0),harga_rata:parseInt(a.harga_rata),harga_nota:parseInt(a.harga_nota)||0,harga:parseInt(a.harga),berat_nota:parseFloat(a.berat_nota)||0,berat:parseFloat(a.berat)};if(void 0===a.kondisi)return!1;var r=JSON.parse(localStorage.getItem("data_barang_pembelian_tmp"))||[];document.getElementById("kode_barcode").focus(),-1===r.findIndex(function(e){return e.kode_barcode===a.kode_barcode})?(r.push(n),Object(N.e)("success","Barang Berhasil Ditambahkan"),localStorage.setItem("data_barang_pembelian_tmp",JSON.stringify(r)),this.props.dispatch(Object(u.k)(r)),this.props.dispatch(Object(P.d)("ModalTambahBarang")),setTimeout(function(){e.setState({isLoadingSimpanBarang:!1})},200)):(setTimeout(function(){e.setState({isLoadingSimpanBarang:!1})},200),document.getElementById("kode_barcode").focus(),Object(N.e)("info","Barang Sudah Ada Di Tabel"))}},{key:"cekOtorisasi",value:function(a){var e=this,t={user_id:a.username,password:a.password,kategori:"PEMBELIAN",description:"PEMBELIAN DI ATAS NOTA",keterangan:a.keterangan.toUpperCase()||"-"};Object(y.h)("authorization",t).then(function(a){e.sendRequest(e.state.hasil),Object(N.e)("success",a.data.message),localStorage.setItem("otorisasi","false"),e.setState({otorisasi:!0}),e.props.dispatch(Object(v.Ab)())}).catch(function(a){e.setState({otorisasi:!1}),Object(N.e)("info","Otorisasi Gagal..")})}},{key:"handleSubmit",value:function(a){var e=this;this.setState({isLoading:!0}),localStorage.setItem("data_customer_pembelian_tmp",JSON.stringify(a)),setTimeout(function(){var a=JSON.parse(localStorage.getItem("data_barang_pembelian_tmp")),t=0;a.forEach(function(a,e){t+=a.harga});var n={jenis:"CASH",jumlah_rp:t},r=JSON.parse(localStorage.getItem("data_customer_pembelian_tmp")),o=JSON.parse(localStorage.getItem("data_barang_pembelian_tmp")),s=[];o.forEach(function(a,e){var t={kode_dept:a.kode_dept,nama_barang:a.nama_barang,berat_nota:a.berat_nota,harga:a.harga,berat:a.berat,kadar:a.kadar||0,harga_nota:a.harga_nota,kondisi:a.kondisi,kode_barcode:a.kode_barcode};s.push(t)});var i={kode_sales:r.kode_sales,nama_customer:r.nama_customer,kode_member:"NONMEMBER"===r.jenis_pelanggan?r.jenis_pelanggan:r.kode_customer,alamat_customer:r.alamat_customer,no_hp:r.no_hp,detail_barang:s,pembayaran:[n]};Object(y.g)("pembelian/simpan",i).then(function(a){Object(N.e)("success",a.data.message)}).then(function(){e.setState({isLoading:!1})}).then(function(){e.props.dispatch(Object(P.d)("ModalPembayaran"))}).then(function(){localStorage.setItem("data_customer_pembelian_tmp",JSON.stringify([])),localStorage.setItem("data_barang_pembelian_tmp",JSON.stringify([]))}).then(function(){e.props.dispatch(Object(u.k)([])),e.setState({step:0})}).catch(function(a){return e.errorhandling(a)})},500)}},{key:"back",value:function(a){this.setState({step:a})}},{key:"simpanPembayaran",value:function(a){var e=this;if("CASH"!==a.jenis&&a.kembali.replace(/[^0-9]/g,"")-a.cash<0)return Object(N.e)("info","Pembayaran tidak boleh lebih dari sisa"),!1;this.setState({isLoading:!0});var t=JSON.parse(localStorage.getItem("data_barang_pembelian_tmp"));t.forEach(function(a,e){a.harga});var n=0;n=a.cash>a.grand_total_pembayaran?a.grand_total_pembayaran:a.cash;var r={jenis:a.jenis,jumlah_rp:n};if(parseInt(a.cash)<parseInt(a.grand_total_pembayaran)){var o=parseInt(a.grand_total_pembayaran)-parseInt(a.cash);return Object(N.e)("info","Pembayaran Masih Kurang Rp."+parseInt(o).toLocaleString("kr-KO")),this.setState({isLoading:!1}),!1}var s=JSON.parse(localStorage.getItem("data_customer_pembelian_tmp")),i=JSON.parse(localStorage.getItem("data_barang_pembelian_tmp")),l=[];i.forEach(function(a,e){var t={kode_dept:a.kode_dept,nama_barang:a.nama_barang,berat_nota:a.berat_nota,harga:a.harga,berat:a.berat,harga_nota:a.harga_nota,kondisi:a.kondisi,kode_barcode:a.kode_barcode};l.push(t)});var c={kode_sales:s.kode_sales,nama_customer:s.nama_customer,kode_member:"NONMEMBER"===s.jenis_pelanggan?s.jenis_pelanggan:s.kode_customer,alamat_customer:s.alamat_customer,no_hp:s.no_hp,detail_barang:l,pembayaran:[r]};Object(y.g)("pembelian/simpan",c).then(function(a){Object(N.e)("success",a.data.message)}).then(function(){e.setState({isLoading:!1})}).then(function(){e.props.dispatch(Object(P.d)("ModalPembayaran"))}).then(function(){localStorage.setItem("data_customer_pembelian_tmp",JSON.stringify([])),localStorage.setItem("data_barang_pembelian_tmp",JSON.stringify([]))}).then(function(){e.props.dispatch(Object(u.k)([])),e.setState({step:0})}).catch(function(a){return e.errorhandling(a)})}},{key:"componentWillUnmount",value:function(){localStorage.setItem("data_customer_pembelian_tmp",JSON.stringify([])),localStorage.setItem("data_barang_pembelian_tmp",JSON.stringify([]))}},{key:"componentDidMount",value:function(){this.context.handleSetPageSidebar(!1),this.context.handleSetPageHeader(!1)}},{key:"errorhandling",value:function(a){this.setState({isLoading:!1}),Object(N.e)("info","Transaksi Gagal Disimpan")}},{key:"nextLihatDataBarang",value:function(){if(null==localStorage.getItem("data_barang_pembelian_tmp")||0===JSON.parse(localStorage.getItem("data_barang_pembelian_tmp")).length)return Object(N.e)("info","Data Barang Tidak Boleh Kosong"),!1;this.setState({step:1})}},{key:"btlPembelian",value:function(){var a=this;this.setState({isLoadingBatal:!0}),setTimeout(function(){localStorage.setItem("data_customer_pembelian_tmp",JSON.stringify([])),a.props.dispatch(Object(u.k)([])),localStorage.setItem("data_barang_pembelian_tmp",JSON.stringify([])),a.setState({isLoadingBatal:!1})},500)}},{key:"render",value:function(){var a=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement(m.b,{to:"/home"},l.a.createElement("button",{type:"button",className:"btn btn-secondary","data-tut":"reactour_4"},l.a.createElement("i",{className:"fa fa-angle-left mr-3","aria-hidden":"true"})," Home")),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",null,l.a.createElement("ol",{className:"breadcrumb float-xl-right"},l.a.createElement("li",{className:"breadcrumb-item"},l.a.createElement(m.b,{to:"#"},"Pembelian")),l.a.createElement("li",{className:"breadcrumb-item active"},"Transaksi Pembelian")),l.a.createElement("h1",{className:"page-header"},"Transaksi Pembelian "),l.a.createElement(b.a,null,l.a.createElement(b.c,null,"Transaksi Pembelian"),l.a.createElement("br",null),l.a.createElement(h.a,{steps:[{title:"Input Barang"},{title:"Lihat Data Barang"},{title:"Data Customer"}],activeStep:this.state.step}),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},0===this.state.step?l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"container"},l.a.createElement(L,{isLoadingSimpanBarang:this.state.isLoadingSimpanBarang,columns:this.state.columns,onSubmit:function(e){return a.simpanBarang(e)}}),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-6 text-left"},l.a.createElement("button",{onClick:function(){return a.btlPembelian()},className:"btn btn-warning",disabled:this.state.isLoadingBatal,type:"button"},this.state.isLoadingBatal?l.a.createElement(l.a.Fragment,null,l.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Reset Data"):"Reset Data")),l.a.createElement("div",{className:"col-6 text-right"},l.a.createElement("button",{className:"btn btn-primary",onClick:function(){return a.nextLihatDataBarang()}}," ","Next"," "))))):1===this.state.step?l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"container"},l.a.createElement(V,{isLoadingSimpanBarang:this.state.isLoadingSimpanBarang,columns:this.state.columns,onSubmit:function(e){return a.simpanBarang(e)}}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-6 text-left"},l.a.createElement("button",{onClick:function(){return a.back(0)},className:"btn btn-secondary",type:"button"},"Kembali")),l.a.createElement("div",{className:"col-6 text-right"},l.a.createElement("button",{className:"btn btn-primary",onClick:function(){return a.setState({step:2})}}," ","Next"," "))))):2===this.state.step?l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"container"},l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(F,{isLoading:this.state.isLoading,back:function(){return a.back(1)},isLoadingDataCustomer:this.state.isLoadingDataCustomer,onSubmit:function(e){return a.handleSubmit(e)}}))):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"container"},l.a.createElement(U,{isLoading:this.state.isLoading,onSubmit:function(e){return a.simpanPembayaran(e)},back:function(){return a.back(2)}})))),l.a.createElement("br",null)),l.a.createElement(Q.a,{title:"Otorisasi Pembelian",size:"P",content:l.a.createElement(W.a,{keterangan:!0,onSubmit:function(e){return a.cekOtorisasi(e)}})})))}}]),t}(l.a.Component);Z.contextType=X.a;e.default=Object(c.b)(function(a){return{setBarangPembelian:a.penjualan.setBarangPembelian}},null)(Z)},732:function(a,e,t){"use strict";e.a=function(a){var e={};return a.jenis||(e.jenis="Jenis Tidak Boleh Kosong"),e}},751:function(a,e,t){"use strict";e.a=function(a){var e={};return a.kode_sales||(e.kode_sales="Kode Sales Harus Dipilih"),a.nama_customer||(e.nama_customer="Nama Customer Harus Diisi"),a.no_hp||(e.no_hp="No Hp Harus Diisi"),a.alamat||(e.alamat="Alamat Harus Diisi"),e}},769:function(a,e,t){"use strict";var n=t(13),r=t(14),o=t(16),s=t(15),i=t(0),l=t.n(i),c=t(40),m=t(335),p=t(336),d=t(29),u=function(a){Object(o.a)(t,a);var e=Object(s.a)(t);function t(a){var r;return Object(n.a)(this,t),(r=e.call(this,a)).state={},r}return Object(r.a)(t,[{key:"componentDidMount",value:function(){setTimeout(function(){document.getElementById("username").focus()},100)}},{key:"render",value:function(){return l.a.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:function(a){"Enter"===a.key&&a.preventDefault()},autoComplete:"off"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-6"},l.a.createElement(m.a,{name:"no_faktur_group",component:d.b,type:"hidden"}),l.a.createElement(m.a,{name:"alasan",component:d.b,type:"hidden"}),l.a.createElement(m.a,{id:"username",name:"username",component:d.e,type:"text",nouperCase:!0,label:"Username",placeholder:"Masukan Username"})),l.a.createElement("div",{className:"col-lg-6"},l.a.createElement(m.a,{name:"password",component:d.e,type:"password",nouperCase:!0,label:"Password",placeholder:"Masukan Password"})),l.a.createElement("div",{className:this.props.keterangan?"col-lg-12":"col-lg-12 d-none"},l.a.createElement(m.a,{name:"keterangan",component:d.e,label:"Keterangan",placeholder:"Masukan Keterangan"})),l.a.createElement("div",{className:"col-lg-12"},l.a.createElement("label",null," \xa0 "),l.a.createElement("button",{type:"submit",name:"type_btn",className:"btn btn-primary btn-block",disabled:this.props.isLoadingOtorisasi},this.props.isLoadingOtorisasi?l.a.createElement(l.a.Fragment,null,l.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Otorisasi"):"Otorisasi"))))}}]),t}(i.Component);u=Object(p.a)({form:"OtorisasiHancur",enableReinitialize:!0})(u),e.a=Object(c.b)(null)(u)}}]);
//# sourceMappingURL=10.36bc57b9.chunk.js.map